{% extends 'master.html.twig' %}

{% block title %}Dossiers - {{ parent() }}{% endblock %}

{% block pdfsplitter %}{% endblock %}

{% block document %}

    <div class="document well">
        {{ form_start(searchForm, {'attr': {}}) }}
        <div class="document-header">
            <h1 class="document-title">Dossiers</h1>
            
            <div class="group search-control">
              <div class="group">
                <div class="search-input">
                  <input name="search_dossier_form[naam]" placeholder="Zoek dossiers op naam" type="text" value="{{ searchForm.naam.vars.value }}">
                  <i class="icon-search"></i>
                  <a href="#cancel" data-handler="cancel" class="search-cancel" tabindex="-1">&times;</a>
                  {% do searchForm.naam.setRendered() %}
                </div>
                <button type="submit" class="button">Zoeken</button>
              </div>
          
              <nav class="nav-internal">
                  <ul>
                      <li><a href="{{ path('gemeenteamsterdam_fixxxschuldhulp_appdossier_indexprullenbak') }}">Prullenbak</a></li>
                      <li><a href="{{ path('gemeenteamsterdam_fixxxschuldhulp_appdossier_create') }}" class="primary">Nieuw dossier</a></li>
                  </ul>
              </nav>
            </div>
        </div>
        <div class="search">
            
            <fieldset class="search-basic naked">
              <div class="tabs">
                <ul>
                  <li class="{{ searchQuery.section == 'madi' ? 'active' }}"><a href="?section=madi">Dossiers bij MaDi</a></li>
                  <li class="{{ searchQuery.section == 'gka' ? 'active' }}"><a href="?section=gka">Dossiers bij GKA</a></li>
                  <li class="{{ searchQuery.section == 'archief' ? 'active' }}"><a href="?section=archief">Afgerond</a></li>
                  <li class="{{ searchQuery.section == 'search' ? 'active' }}"><a href="?section=search">Zoeken</a></li>
                </ul>
              </div>

            </fieldset>

            <fieldset id="search-extended" class="search-extended {{ searchQuery.section == 'search' ? 'active' }}">
                <input type="hidden" name="section" value="search">
                <div class="search-status">
                  {{ form_row(searchForm.status) }}
                </div>
                <div class="columns">
                  <div class="column">
                    {{ form_row(searchForm.schuldhulpbureau) }}
                    {{ form_row(searchForm.medewerkerSchuldhulpbureau) }}
                  </div>
                  <div class="column">
                    {{ form_row(searchForm.teamGka) }}
                  </div>
                </div>
                
                
                
                <p class="buttons right">
                    <button type="submit" class="button">Zoeken</button>
                    <a href="#search-extended" data-handler="toggle">Annuleren</a>
                </p>
            </fieldset>


        </div>
        {{ form_end(searchForm) }}
        <div class="table" id="search-results">
            <table>
                <thead>
                    <tr>
                        <th>Naam</th>
                        <th>MaDi</th>
                        <th style="width: 75px;">Regas</th>
                        <th style="width: 75px;">Allegro</th>
                        <th>Aangemaakt</th>
                        <th style="width: 150px;">Status</th>
                    </tr>
                </thead>
                <tbody>
{% for dossier in dossiers %}
                    <tr>
                        <th><a href="{{ path('gemeenteamsterdam_fixxxschuldhulp_appdossier_detailvoorlegger', {'dossierId': dossier.Id}) }}">{{ dossier.clientNaam }}</a></th>
                        <td>{{ dossier.schuldhulpbureau }}</td>
                        <td class="nummer">
                            {{ dossier.regasNummer|default('-') }}
                        </td>
                        <td class="nummer">
                            {{ dossier.allegroNummer|default('-') }}
                        </td>
                        <td class="datum">
                            {{ dossier.aanmaakDatumTijd|date('d-m-Y') }}
                        </td>
                        <td>{{ dossier.status|trans }}</td>
                    </tr>
{% endfor %}
               </tbody>
            </table>


            {% if pagination.numberOfPages > 1 %}
              <div class="pagination">
                  {% if pagination.page <= 0 %}
                  <span class="prev">vorige</span>
                  {% else %}
                  <a class="prev" href="{{ path('gemeenteamsterdam_fixxxschuldhulp_appdossier_index', {'page': pagination.page - 1, 'search_dossier_form': app.request.query.get('search_dossier_form') }) }}">vorige</a>
                  {% endif %}
                  <span>pagina {{ pagination.page + 1 }} van {{ pagination.numberOfPages }}</span>
                  {% if (pagination.page + 1) >= pagination.numberOfPages %}
                  <span class="next">volgende</span>
                  {% else %}
                  <a class="next" href="{{ path('gemeenteamsterdam_fixxxschuldhulp_appdossier_index', {'page': pagination.page + 1, 'search_dossier_form': app.request.query.get('search_dossier_form')}) }}">volgende</a>
                  {% endif %}
              </div>
            {% endif %}

        </div>
    </div>
{% endblock %}
